"use strict";(self.webpackChunkfe_handi=self.webpackChunkfe_handi||[]).push([[5732,8292,9293,3850,3845],{8292:function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var o=n(75985);function r(e,t,n){return"success"===e?o.Am.success(t,n):o.Am.error(t,n)}},49293:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var o=n(75985),r=(n(5462),n(80184));function a(){return(0,r.jsx)(o.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})}},33850:function(e,t,n){n.r(t),n.d(t,{options:function(){return o}});var o={position:"top-right",autoClose:3e3,hideProgressBar:!1,draggable:!0,draggableDirection:0,draggablePercent:60,theme:"colored"}},55732:function(e,t,n){n.r(t);var o=n(74165),r=n(15861),a=n(70885),s=n(68870),i=n(20890),c=n(36151),l=n(13239),u=n(72791),d=n(8292),p=n(49293),h=n(33850),m=n(63845),f=n(59434),g=n(3437),x=n(97005),j=n(35611),Z=n(44238),C=n(80184);t.default=function(e){var t=e.handleClose,n=e.onConfirm,v=(0,f.I0)(),b=u.useState(!1),w=(0,a.Z)(b,2),k=w[0],S=w[1],P=u.useState(null),y=(0,a.Z)(P,2),z=y[0],I=y[1],F=u.useState({x:0,y:0}),T=(0,a.Z)(F,2),O=T[0],A=T[1],B=u.useState(1),R=(0,a.Z)(B,2),G=R[0],D=R[1],L=u.useState(null),U=(0,a.Z)(L,2),_=U[0],E=U[1],H=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){var t,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,(0,Z.CropImage)(z,_);case 4:return t=e.sent,(r=new FormData).append("background_img",t),e.next=9,m.default.post("/upload/bg-image",r,{headers:{"Content-Type":"multipart/form-data"}});case 9:200===(a=e.sent).data.code?(I(null),v((0,g.updateUser)(a.data.user)),(0,d.default)("success",a.data.message,h.options),n()):(0,d.default)("error",a.data.message,h.options),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),413===e.t0.response.status?(0,d.default)("error","Image is too large. Please choose another image!",h.options):(0,d.default)("error",e.t0.message,h.options);case 16:return e.prev=16,S(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return(0,C.jsxs)(s.Z,{sx:{width:"100%",height:"100%"},children:[(0,C.jsx)(p.default,{}),(0,C.jsx)("form",{encType:"multipart/form-data",children:(0,C.jsx)("input",{accept:"image/*",id:"image-upload",type:"file",style:{display:"none"},onChange:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){I(e.target.result)}}},required:!0})}),!z&&(0,C.jsxs)(s.Z,{children:[(0,C.jsx)(s.Z,{sx:{width:{xs:"100%",sm:"50%",md:"50%"},m:"0 auto"},children:(0,C.jsxs)(s.Z,{sx:{fontSize:{xs:12,md:14}},children:[(0,C.jsx)(i.Z,{component:"li",sx:{fontSize:"inherit"},children:"Recommended dimensions 1440 x 180 px"}),(0,C.jsx)(i.Z,{component:"li",sx:{fontSize:"inherit"},children:"JPG, JPEG, PNG"}),(0,C.jsx)(i.Z,{component:"li",sx:{fontSize:"inherit"},children:"Max size: 5mb"})]})}),(0,C.jsx)(s.Z,{sx:{mt:4},align:"center",children:(0,C.jsx)("label",{htmlFor:"image-upload",children:(0,C.jsx)(c.Z,{variant:"outlined",color:"primary",component:"span",startIcon:(0,C.jsx)(j.Z,{}),sx:{mt:2},children:"choose an image"})})})]}),z&&(0,C.jsx)(s.Z,{sx:{position:"relative",width:"100%",height:"100%",minHeight:260,p:2,img:{width:"100%",height:"100%",objectFit:"contain",objectPosition:"center"}},children:(0,C.jsx)(x.ZP,{image:z,crop:O,aspect:4,onCropChange:function(e,t){A(e),D(t)},cropShape:"rect",showGrid:!0,zoomWithScroll:!0,restrictPosition:!0,zoom:G,onZoomChange:D,dragCrop:!0,dragImage:!1,pinchToZoom:!1,allowCropOutOfBounds:!1,onCropComplete:function(e,t){E(t)},interaction:{dragCrop:!0,pinchToZoom:!1,dragImage:!1}})}),z&&(0,C.jsx)(s.Z,{sx:{mt:1},align:"center",children:(0,C.jsx)("label",{htmlFor:"image-upload",children:(0,C.jsx)(c.Z,{variant:"outlined",color:"primary",component:"span",startIcon:(0,C.jsx)(j.Z,{}),sx:{mt:2},children:"choose another image"})})}),(0,C.jsxs)(s.Z,{align:"right",sx:{backgroundColor:"#F4F5FB",p:2,borderRadius:3,mt:5},children:[(0,C.jsx)(c.Z,{size:"small",variant:"outlined",onClick:t,children:"Cancel"}),(0,C.jsx)(c.Z,{size:"small",variant:"contained",color:"primary",sx:{ml:1},onClick:H,disabled:k,children:k?(0,C.jsx)(l.Z,{size:24,sx:{color:"white"},thickness:5}):"Save"})]})]})}},63845:function(e,t,n){n.r(t);var o=n(31243).Z.create();o.defaults.baseURL="http://api-handiworks.technopreneurship.store/api",o.defaults.headers.common.Accept="application/json",o.defaults.headers.common["Content-Type"]="application/json",o.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),o.interceptors.response.use((function(e){return e}),(function(e){if("Network Error"===e.message)return Promise.reject(e);if(401===(e.response&&e.response.status))localStorage.removeItem("accessToken"),window.location.href="/login";return Promise.reject(e)})),t.default=o},5462:function(){}}]);
//# sourceMappingURL=5732.4b5c4d43.chunk.js.map