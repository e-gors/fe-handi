"use strict";(self.webpackChunkfe_handi=self.webpackChunkfe_handi||[]).push([[9455,8292,9293,3850,3845],{8292:function(e,r,t){t.r(r),t.d(r,{default:function(){return o}});var n=t(75985);function o(e,r,t){return"success"===e?n.Am.success(r,t):n.Am.error(r,t)}},49293:function(e,r,t){t.r(r),t.d(r,{default:function(){return a}});var n=t(75985),o=(t(5462),t(80184));function a(){return(0,o.jsx)(n.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})}},33850:function(e,r,t){t.r(r),t.d(r,{options:function(){return n}});var n={position:"top-right",autoClose:3e3,hideProgressBar:!1,draggable:!0,draggableDirection:0,draggablePercent:60,theme:"colored"}},69455:function(e,r,t){t.r(r);var n=t(74165),o=t(15861),a=t(70885),s=t(68870),i=t(20890),c=t(36151),l=t(13239),p=t(72791),d=t(8292),u=t(49293),m=t(33850),h=t(63845),f=t(59434),g=t(3437),x=t(97005),j=t(35611),Z=t(44238),C=t(80184),v={wrapper:{width:"100%",height:"100%"},descriptionWrapper:{width:{xs:"100%",sm:"50%",md:"50%"},m:"0 auto"},descriptions:{fontSize:{xs:12,md:14}},description:{fontSize:"inherit"},imageCropWrapper:{position:"relative",width:"100%",height:"100%",minHeight:260,p:2,img:{width:"100%",height:"100%",objectFit:"contain",objectPosition:"center"}},buttonsWrapper:{backgroundColor:"#F4F5FB",p:2,borderRadius:3,mt:5}};r.default=function(e){var r=e.handleClose,t=e.onConfirm,w=(0,f.I0)(),b=p.useState(!1),k=(0,a.Z)(b,2),P=k[0],S=k[1],y=p.useState(null),I=(0,a.Z)(y,2),z=I[0],F=I[1],T=p.useState({x:0,y:0}),W=(0,a.Z)(T,2),O=W[0],A=W[1],B=p.useState(1),R=(0,a.Z)(B,2),G=R[0],D=R[1],L=p.useState(null),U=(0,a.Z)(L,2),_=U[0],E=U[1],H=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(){var r,o,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,(0,Z.CropImage)(z,_);case 4:return r=e.sent,(o=new FormData).append("profile_img",r),e.next=9,h.default.post("/upload/profile-image",o,{headers:{"Content-Type":"multipart/form-data"}});case 9:200===(a=e.sent).data.code?(F(null),w((0,g.updateUser)(a.data.user)),(0,d.default)("success",a.data.message,m.options),t()):(0,d.default)("error",a.data.message,m.options),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),413===e.t0.response.status?(0,d.default)("error","Image is too large. Please choose another image!",m.options):(0,d.default)("error",e.t0.message,m.options);case 16:return e.prev=16,S(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return(0,C.jsxs)(s.Z,{sx:v.wrapper,children:[(0,C.jsx)(u.default,{}),(0,C.jsx)("form",{encType:"multipart/form-data",children:(0,C.jsx)("input",{accept:"image/*",id:"image-upload",type:"file",style:{display:"none"},onChange:function(e){var r=e.target.files[0];if(r){var t=new FileReader;t.readAsDataURL(r),t.onload=function(e){F(e.target.result)}}},required:!0})}),!z&&(0,C.jsxs)(s.Z,{children:[(0,C.jsx)(s.Z,{sx:v.descriptionWrapper,children:(0,C.jsxs)(s.Z,{sx:v.descriptions,children:[(0,C.jsx)(i.Z,{component:"li",sx:v.description,children:"Recommended dimensions 400 x 400 px"}),(0,C.jsx)(i.Z,{component:"li",sx:v.description,children:"JPG, JPEG, PNG"}),(0,C.jsx)(i.Z,{component:"li",sx:v.description,children:"Max size: 5mb"})]})}),(0,C.jsx)(s.Z,{sx:{mt:4},align:"center",children:(0,C.jsx)("label",{htmlFor:"image-upload",children:(0,C.jsx)(c.Z,{variant:"outlined",color:"primary",component:"span",startIcon:(0,C.jsx)(j.Z,{}),sx:{mt:2},children:"choose an image"})})})]}),z&&(0,C.jsx)(s.Z,{sx:v.imageCropWrapper,children:(0,C.jsx)(x.ZP,{image:z,crop:O,aspect:1,onCropChange:function(e,r){A(e),D(r)},cropShape:"rect",showGrid:!0,zoomWithScroll:!0,restrictPosition:!0,zoom:G,onZoomChange:D,dragCrop:!0,dragImage:!1,pinchToZoom:!1,allowCropOutOfBounds:!1,onCropComplete:function(e,r){E(r)},interaction:{dragCrop:!0,pinchToZoom:!1,dragImage:!1}})}),z&&(0,C.jsx)(s.Z,{sx:{mt:1},align:"center",children:(0,C.jsx)("label",{htmlFor:"image-upload",children:(0,C.jsx)(c.Z,{variant:"outlined",color:"primary",component:"span",startIcon:(0,C.jsx)(j.Z,{}),sx:{mt:2},children:"choose another image"})})}),(0,C.jsxs)(s.Z,{align:"right",sx:v.buttonsWrapper,children:[(0,C.jsx)(c.Z,{size:"small",variant:"outlined",onClick:r,children:"Cancel"}),(0,C.jsx)(c.Z,{size:"small",variant:"contained",color:"primary",sx:{ml:1},onClick:H,disabled:P,children:P?(0,C.jsx)(l.Z,{size:24,sx:{color:"white"},thickness:5}):"Save"})]})]})}},63845:function(e,r,t){t.r(r);var n=t(31243).Z.create();n.defaults.baseURL="https://api-handiworks.technopreneurship.store/api",n.defaults.headers.common.Accept="application/json",n.defaults.headers.common["Content-Type"]="application/json",n.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),n.interceptors.response.use((function(e){return e}),(function(e){if("Network Error"===e.message)return Promise.reject(e);if(401===(e.response&&e.response.status))localStorage.removeItem("accessToken"),window.location.href="/login";return Promise.reject(e)})),r.default=n},5462:function(){}}]);
//# sourceMappingURL=9455.4bba97c3.chunk.js.map