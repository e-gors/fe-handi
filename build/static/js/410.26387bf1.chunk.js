"use strict";(self.webpackChunkfe_handi=self.webpackChunkfe_handi||[]).push([[410,1343,3778,8292,3850,3845],{21343:function(e,n,t){t.r(n);var r=t(1413),a=t(70885),o=t(45987),s=t(68870),i=t(39281),l=t(79836),c=t(56890),u=t(35855),d=t(53994),m=t(53382),f=t(20068),h=t(13400),p=t(20890),g=t(67492),Z=t(61889),x=t(13239),v=t(72791),j=t(41286),b=t(27247),C=t(3746),w=t(91329),y=t(79908),P=t(80184),k=["data","columns","onChangePage","rowsPerPage","onRowsChangePage","withPagination","withNumber","onDelete","onEdit","onComplete","onRevoked","onWithdrawn","onCancel","onView","loading"];function _(e){var n=e.data,t=void 0===n?[]:n,_=e.columns,E=void 0===_?[]:_,S=e.onChangePage,B=(e.rowsPerPage,e.onRowsChangePage),R=e.withPagination,z=void 0!==R&&R,A=e.withNumber,D=e.onDelete,T=e.onEdit,W=e.onComplete,I=e.onRevoked,O=(e.onWithdrawn,e.onCancel,e.onView),N=e.loading,F=(0,o.Z)(e,k),H=(0,v.useState)({}),V=(0,a.Z)(H,2),L=(V[0],V[1]),U=(0,r.Z)({rowsPerPageOptions:[10,20,50,100,250],component:"div",count:1,rowsPerPage:10,page:1},F);return(0,P.jsxs)(s.Z,(0,r.Z)((0,r.Z)({},F),{},{sx:{border:"1px solid #BEBEBE",boxShadow:10},children:[(0,P.jsxs)(i.Z,{children:[(0,P.jsxs)(l.Z,{stickyHeader:!0,children:[(0,P.jsx)(c.Z,{sx:{"& th":{color:"black",backgroundColor:"#E3E4E9",fontWeight:"bold"}},children:(0,P.jsxs)(u.Z,{children:[(D||W||T||O||I||A)&&(0,P.jsx)(d.Z,{size:"small",align:"center",children:"#"}),E.map((function(e,n){return(0,P.jsx)(d.Z,{size:"small",sx:{whiteSpace:"noWrap"},children:e.label},n)}))]})}),(0,P.jsx)(m.Z,{children:!N&&t.map((function(e,n){return(0,P.jsxs)(u.Z,{children:[(D||T||O||W||I||A)&&(0,P.jsxs)(d.Z,{size:"small",align:"center",sx:{whiteSpace:"noWrap"},children:[A&&n+1,O&&(0,P.jsx)(f.Z,{title:"View",arrow:!0,children:(0,P.jsx)(h.Z,{size:"small",color:"primary",onClick:function(){return function(e){L(e),O&&O(e)}(e)},children:(0,P.jsx)(C.Z,{})})}),W&&(0,P.jsx)(f.Z,{title:"Complete contract?",arrow:!0,children:(0,P.jsx)(h.Z,{size:"small",color:"primary",onClick:function(){return function(e){L(e),W&&W(e)}(e)},children:(0,P.jsx)(y.Z,{})})}),I&&(0,P.jsx)(f.Z,{title:"Cancel",arrow:!0,children:(0,P.jsx)(h.Z,{size:"small",sx:{color:"gray"},onClick:function(){return function(e){L(e),I&&I(e)}(e)},children:(0,P.jsx)(w.Z,{})})}),T&&(0,P.jsx)(f.Z,{title:"Edit",arrow:!0,children:(0,P.jsx)(h.Z,{size:"small",sx:{color:"#00c853"},onClick:function(){return function(e){L(e),T&&T(e)}(e)},children:(0,P.jsx)(j.Z,{})})}),D&&(0,P.jsx)(f.Z,{title:"Delete",arrow:!0,children:(0,P.jsx)(h.Z,{size:"small",color:"error",onClick:function(){return function(e){L(e),D&&D(e)}(e)},children:(0,P.jsx)(b.Z,{})})})]}),E.map((function(t,r){var a=function(e,n){var t=n.name&&n.name.split(".")||[];if(0===t.length)return"";var r=e;return t.forEach((function(e){r=void 0!==r[e]&&null!==r[e]?r[e]:""})),Array.isArray(r)&&(r=r.join(", ")),r}(e,t),o="status"===t.name,s="inherit";return o&&("pending"===a?s="red":"accepted"===a||"in progress"===a||"posted"===a?s="green":"completed"===a?s="blue":"declined"===a?s="orange":"withdrawn"===a&&(s="gray")),(0,P.jsx)(d.Z,{size:"small",sx:{whiteSpace:"noWrap",fontWeight:o?"bold":"normal",color:s},children:t.customBodyRender?t.customBodyRender(a,e,r,n):a},"".concat(r,"-").concat(t.name))}))]},n)}))})]}),!N&&0===t.length&&(0,P.jsx)(p.Z,{align:"center",children:"No item(s) at the moment"})]}),z&&(0,P.jsx)(g.Z,(0,r.Z)({onPageChange:function(e,n){S&&S(n)},onRowsPerPageChange:function(e){B&&B(e.target.value)}},U)),N&&(0,P.jsx)(Z.ZP,{container:!0,justifyContent:"center",children:(0,P.jsx)(x.Z,{})})]}))}n.default=(0,v.memo)(_)},64253:function(e,n,t){t.r(n);var r=t(1413),a=t(45987),o=t(93006),s=(t(72791),t(80184)),i=["errors","name","customError"];n.default=function(e){var n=e.errors,t=e.name,l=e.customError,c=(0,a.Z)(e,i),u=!1,d="";l&&(u=!0,d=l),n&&(u=n&&n.has(t)||!1,d=n&&n.first(t)||"");var m=(0,r.Z)((0,r.Z)({error:u,name:t,helperText:d},c),{},{value:c.value||""});return(0,s.jsx)(o.Z,(0,r.Z)({size:"small",variant:"outlined"},m))}},53778:function(e,n,t){t.r(n);var r=t(1413),a=t(45987),o=(t(72791),t(68096)),s=t(30829),i=t(58406),l=t(77196),c=t(23786),u=t(47071),d=t(80184),m=["label","errors","options","categories","subCategories","customError"];n.default=function(e){var n=e.label,t=e.errors,f=e.options,h=void 0===f?[]:f,p=e.categories,g=void 0===p?[]:p,Z=e.subCategories,x=void 0===Z?[]:Z,v=e.customError,j=(0,a.Z)(e,m),b=!1,C="";v&&(b=v.error||!1,C=v.message||""),t&&(b=t&&t.has(e.name)||!1,C=t&&t.first(e.name)||"");var w=(0,r.Z)({margin:"dense",error:b},j);return(0,d.jsxs)(o.Z,{size:"small",sx:{width:"100%",mt:.5,mb:.5},children:[(0,d.jsx)(s.Z,{id:"dropdown-label",children:n}),(0,d.jsxs)(i.Z,(0,r.Z)((0,r.Z)({labelId:"dropdown-label",input:(0,d.jsx)(l.Z,{label:n})},w),{},{children:[h.map((function(e,n){return(0,d.jsx)(c.Z,{value:e,children:e},n)})),g.map((function(e,n){return(0,d.jsx)(c.Z,{value:e.name,children:e.name},n)})),x.map((function(e){return e.children.map((function(e,n){return(0,d.jsx)(c.Z,{value:e.name,children:e.name},n)}))}))]})),(0,d.jsx)(u.Z,{error:!0,children:C})]})}},8292:function(e,n,t){t.r(n),t.d(n,{default:function(){return a}});var r=t(75985);function a(e,n,t){return"success"===e?r.Am.success(n,t):r.Am.error(n,t)}},49293:function(e,n,t){t.r(n),t.d(n,{default:function(){return o}});var r=t(75985),a=(t(5462),t(80184));function o(){return(0,a.jsx)(r.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})}},33850:function(e,n,t){t.r(n),t.d(n,{options:function(){return r}});var r={position:"top-right",autoClose:3e3,hideProgressBar:!1,draggable:!0,draggableDirection:0,draggablePercent:60,theme:"colored"}},60410:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var r=t(4942),a=t(1413),o=t(70885),s=t(72791),i=t(68870),l=t(63466),c=t(36151),u=t(80911),d=t(20890),m=t(94721),f=t(23786),h=t(63845),p=t(21343),g=t(64253),Z=t(5403),x=t(60585),v=t(53778),j=t(41143),b=t(8292),C=t(33850),w=t(59434),y=t(3437),P=t(49293),k=t(80184),_=["pending","in progress","feedback pending","completed","closed"],E=["Ascending","Descending"],S=["Ascending","Descending"],B=[{name:"bid",label:"Contractor",customBodyRender:function(e){var n;return null===(n=e.user)||void 0===n?void 0:n.full_name}},{name:"post.user",label:"Client",customBodyRender:function(e){return e.full_name}},{name:"post",label:"Contract Name",customBodyRender:function(e){return null===e||void 0===e?void 0:e.title}},{name:"post",label:"Type",customBodyRender:function(e){return null===e||void 0===e?void 0:e.job_type}},{name:"start_date",label:"Start Date"},{name:"end_date",label:"End Date"},{name:"post",label:"Rate/Budget",customBodyRender:function(e){return e.rate?e.rate:e.budget}},{name:"status",label:"Status"}];function R(e){var n=e.type,t=(0,w.I0)(),R=s.useState(!1),z=(0,o.Z)(R,2),A=z[0],D=z[1],T=s.useState({}),W=(0,o.Z)(T,2),I=W[0],O=W[1],N=s.useState(!1),F=(0,o.Z)(N,2),H=F[0],V=F[1],L=s.useState(!1),U=(0,o.Z)(L,2),Y=U[0],q=U[1],G=s.useState(null),J=(0,o.Z)(G,2),K=J[0],M=J[1],Q=s.useState({data:[],meta:{}}),X=(0,o.Z)(Q,2),$=X[0],ee=X[1],ne=s.useState({limit:10,page:1}),te=(0,o.Z)(ne,2),re=te[0],ae=te[1],oe=s.useState({values:{search:"",status:"",order_by_date:"",order_by_rate:"",type:""}}),se=(0,o.Z)(oe,2),ie=se[0],le=se[1];s.useEffect((function(){le((function(e){return(0,a.Z)((0,a.Z)({},e),{},{values:(0,a.Z)((0,a.Z)({},e.values),{},{type:n})})}))}),[n]),s.useEffect((function(){ae((function(e){return{limit:e.limit,page:1}})),ue(ie.values)}),[ie.values]);var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};q(!0),h.default.get("/contracts",{params:(0,a.Z)((0,a.Z)({},re),e)}).then((function(e){e.data.data&&ee({data:e.data.data,meta:e.data.meta}),q(!1)})).catch((function(e){q(!1),console.log(e.message)}))},ue=s.useCallback(function(e){var n;return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=this;n&&clearTimeout(n),n=setTimeout((function(){n=null,e.apply(o,r)}),700)}}(ce),[]),de=function(e){var n=e.target.name,t=e.target.value;le((function(e){return(0,a.Z)((0,a.Z)({},e),{},{values:(0,a.Z)((0,a.Z)({},e.values),{},(0,r.Z)({},n,t))})}))};return(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(P.default,{}),(0,k.jsx)(j.default,{title:"Complete Contract?",message:"You are about to change the status of your contract from 'in progress' to 'complete'",loading:H,open:A,onClose:function(){return D(!1)},onConfirm:function(){V(!0),h.default.post("/contract/complete/".concat(I.id)).then((function(e){200===e.data.code?(t((0,y.updateUser)(e.data.user)),(0,b.default)("success",e.data.message,C.options),D(!1)):(0,b.default)("error",e.data.message,C.options),V(!1)})).catch((function(e){V(!1),(0,b.default)("error",e.message,C.options)}))}}),(0,k.jsx)(i.Z,{sx:{width:"100%",backgroundColor:"#EBEBEB",p:2,borderRadius:2,mb:2},children:(0,k.jsxs)("form",{style:{display:"flex",alignItems:"center"},children:[(0,k.jsx)(g.default,{type:"search",label:"Search",name:"search",size:"small",variant:"outlined",placeholder:"Search by contractors",onChange:de,value:ie.values.search,InputProps:{startAdornment:(0,k.jsx)(l.Z,{position:"start",children:(0,k.jsx)(Z.Z,{})}),style:{backgroundColor:"white"}},sx:{width:"100%"}}),(0,k.jsxs)(c.Z,{variant:"outlined",color:"primary",sx:{ml:1,backgroundColor:"white"},onClick:function(e){M(e.currentTarget)},children:[(0,k.jsx)(x.Z,{})," Filter"]}),(0,k.jsxs)(u.Z,{anchorEl:K,open:Boolean(K),onClose:function(){M(null)},PaperProps:{style:{minWidth:300,maxHeight:400,overFlowY:"scroll"}},children:[(0,k.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:"5px 10px"},children:[(0,k.jsx)(d.Z,{children:"Filter"}),(0,k.jsx)(c.Z,{onClick:function(){le({values:{search:"",status:"",order_by_date:"",order_by_rate:"",type:"all"}})},children:"Clear filter"})]}),(0,k.jsx)(m.Z,{}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(v.default,{name:"status",label:"Status",value:ie.values.status,onChange:de,options:_})}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(v.default,{name:"order_by_date",label:"Order By Date",value:ie.values.order_by_date,onChange:de,options:S})}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(v.default,{name:"order_by_rate",label:"Order By Rate",value:ie.values.order_by_rate,onChange:de,options:E})}),(0,k.jsx)(c.Z,{fullWidth:!0,variant:"contained",color:"primary",size:"small",sx:{mt:1},children:"Search"})]})]})}),(0,k.jsx)(p.default,{withPagination:!0,onComplete:function(e){O(e),D(!0)},onEdit:function(e){console.log(e)},onDelete:function(e){console.log(e)},loading:Y,data:$.data,columns:B,rowsPerPage:ie.values.limit,count:$.meta.total||0,page:$.meta.current_page-1||0,onChangePage:function(e,n){re.page!==n&&(q(!0),ae((function(e){return{limit:e.limit,page:n}})),ue({page:n}))},onRowsChangePage:function(e){ce({limit:e}),function(e,n){le((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},e,n))}))}("limit",e)}})]})}},63845:function(e,n,t){t.r(n);var r=t(31243).Z.create();r.defaults.baseURL="http://127.0.0.1:8000/api",r.defaults.headers.common.Accept="application/json",r.defaults.headers.common["Content-Type"]="application/json",r.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),r.interceptors.response.use((function(e){return e}),(function(e){if("Network Error"===e.message)return Promise.reject(e);if(401===(e.response&&e.response.status))localStorage.removeItem("accessToken"),window.location.href="/login";return Promise.reject(e)})),n.default=r}}]);
//# sourceMappingURL=410.26387bf1.chunk.js.map